<!DOCTYPE html>

<html>
<script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
<head>
    <meta charset="UTF-8">
    <title>Canvas</title>
    <h1>Liam Ryan</h1>
    <style type="text/css">
        body {
            background-color: white;
        }

        canvas {
            border: 5px solid black;
        }
    </style>

</head>

<body>

    <canvas id="canvas-for-ball" height="500" width="500"></canvas>

    <script type="text/javascript">
        // Gets a handle to the element with id canvasOne.
        var canvas = document.getElementById("canvas-for-ball");
        // Get a 2D context for the canvas.
        var ctx = canvas.getContext("2d");
        
        class Paddle{
            constructor(width,height,yPos,xPos){
                this.width = width;
                this.height = height;
                this.xPos = xPos;
                this.yPos = yPos;
                
            }
            draw() 
            {
                ctx.fillRect(this.yPos, this.xPos, this.width, this.height);
        
            }
            move(movement){
                if(movement == 1)
                {
                    this.yPos += -1;
                }
                else if(movement == 2)
                {
                    this.yPos += 1;
                }
                else if(movement == 3)
                {
                    this.xPos += -1;
                }
                else if(movement == 4)
                {
                    this.xPos += 1;
                }

            }
        }
        class Ball {
            constructor(xPos, yPos, xVelocity, yVelocity, radius, rotation) {
                //fields describing the object
                this.yPos = yPos;
                this.yVelocity = yVelocity;
                this.xPos = xPos;
                this.xVelocity = xVelocity;
                this.radius = radius;
                this.rotation = rotation;
            }
            draw() {
                //Draw the ball (stroked, not filled).
                ctx.beginPath();
                ctx.arc(this.xPos, this.yPos, this.radius, 0, 2 * Math.PI);
                ctx.stroke();
            }
            rotate() {
                //rotation speed
                this.rotation = this.rotation + 0.025;
                //calculate the outer points of the circle for the peace symbol
                // x= (r*cos(0) + rotation)+ center x position of cirlce
                // y= (r*sin(0) + rotation)+ center y position of cirlce
                var y1 = (this.radius * Math.sin((Math.PI / 4) + this.rotation)) + this.yPos;
                var x1 = (this.radius * Math.cos((Math.PI / 4) + this.rotation)) + this.xPos;
                var y2 = (this.radius * Math.sin((3 * Math.PI / 4) + this.rotation)) + this.yPos;
                var x2 = (this.radius * Math.cos((3 * Math.PI / 4) + this.rotation)) + this.xPos;
                var y3 = (this.radius * Math.sin((Math.PI / 2) + this.rotation)) + this.yPos;
                var x3 = (this.radius * Math.cos((Math.PI / 2) + this.rotation)) + this.xPos;
                var y4 = (this.radius * Math.sin((6 * Math.PI / 4) + this.rotation)) + this.yPos;
                var x4 = (this.radius * Math.cos((6 * Math.PI / 4) + this.rotation)) + this.xPos;
                //move pen to center of cirlce
                ctx.moveTo(this.xPos, this.yPos);
                //draw line to outside point 1
                ctx.lineTo(x1, y1);
                ctx.moveTo(this.xPos, this.yPos);
                //draw line to outside point 2
                ctx.lineTo(x2, y2);
                ctx.moveTo(this.xPos, this.yPos);
                //draw line to outside point 3
                ctx.lineTo(x3, y3);
                ctx.moveTo(this.xPos, this.yPos);
                //draw line to outside point 4
                ctx.lineTo(x4, y4);
                ctx.stroke();
            }
            move() {
                // Update the y and x location.
                this.yPos += this.yVelocity;
                this.xPos += this.xVelocity;
                // Reverse ball direction on contact with bottom
                if (this.yPos >= canvas.height - this.radius) {
                    this.yVelocity = this.yVelocity * -1;
                }
                // Reverse ball direction on contact with top
                else if (this.yPos <= this.radius) {
                    this.yVelocity = this.yVelocity * -1;
                }
                // Bounce from side to side
                if (this.xPos >= canvas.width - this.radius) {
                    this.xVelocity = this.xVelocity * -1;
                }
                else if (this.xPos <= this.radius) {
                    this.xVelocity = this.xVelocity * -1;
                }
            }
        }
        //create object myball
        myBall = new Ball(50, 49, 1, 1, 49, 0);
        myPaddle = new Paddle(26,100,25,25);
         //Add a Javascript event listener to the keypress event.
		        window.addEventListener("keypress", function(event) { 
			    // Just log the event to the console.
			    console.log(event);
	    	    });

		        //keypresses with jQuery
		        $(document.body).on('keydown', function(e) {
			        console.log(e.which);
			        switch (e.which) {
			        // key code for left arrow
			        case 37:
                        myPaddle.move(1);
				        console.log('left arrow key pressed!');
				    break;
                    case 38:
                        myPaddle.move(3);
                        console.log('up arrow pressed');
                    break;
			        // key code for right arrow
			        case 39:
                        myPaddle.move(2);
				        console.log('right arrow key pressed!');
				    break;
                    case 40:
                        myPaddle.move(4);
                        console.log('down arrow pressed');
			        }
		        });
        function repeatme() {
            //clear canvas every frame
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            myPaddle.draw();
            myBall.draw();
            myBall.move();
            myBall.rotate();
            window.requestAnimationFrame(repeatme);
        }
        // Get the animation going.
        repeatme();
    </script>


</body>


</html>